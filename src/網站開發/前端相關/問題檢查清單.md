# 問題檢查清單

![問題檢查清單-1](./images/問題檢查清單-1.png)

## UI 相關

* 白屏
    * 白屏時間需小於1秒（小於200ms最佳）
    * 處理方案
        * 白屏監控
        * 資源加載失敗重試
        * Service Worker 的資源 fallback 機制
        * 模塊都包裝了 error boundary
        * 兼容性探測和提示
        * 白屏提示信息
* 佈局錯亂
* 極端內容 (缺失 / 超長 / 連續字符 / 未轉義 )
* 一致性問題
* 慢 (網絡慢 / 響應慢 / 渲染慢 / 執行慢)

## 程式碼審查

* 通用
    * import 的套件是否符合要求
    * 變數名是否可理解
    * 用 const / let 宣告變數
    * 是否對函式的參數、組件的屬性進行必要的檢查
    * 避免 hardcode 值，用常數替代
    * 複雜的判斷條件需要先賦值再判斷
    * 是否進行必要的數據類型轉換
    * 是否引入不需要的狀態
    * 鏈式調用要檢查成員屬性是否存在 (可用 ?.)
    * 優化嵌套循環和多層判斷
    * 注解程式碼如果不清除應加上說明
    * 檢查是否存在未引用的方法
    * try{...} catch(err){}catch 要有處理
    * 異步請求處理「三態」：加載、空狀態、錯誤處理
    * 避免引入多餘的全局狀態
    * API 錯誤碼有對應的具體文案
    * 函式參數不大於5個
    * 單個檔案小於400行
    * 是否遺漏國際化處理
    * 消除 ESLint 報錯
    * 清除 console.log
* React
    * 禁止寫內聯樣式
    * 禁止直接操作 DOM
    * 使用的是否是標准組件
    * Form 提交是否對處理中進行處理
    * Form提交成功無論是關閉浮層還是跳轉，都需要顯示成功訊息
    * 用 useRef 替代全局變量
    * 組件內有循環要用 useMemo
    * 組件屬性值是函式要用 useCallback
    * 綁定數據的組件是否有加載和空的狀態
* CSS
    * class 命名是否容易重名
    * 禁用 float 和 absolute 佈局
    * 禁止固定寬/高，如需用 min-width``min-height 替代
    * 禁止直接修改通用樣式，採取覆寫的方式
    * 禁止直接修改標簽樣式，同上
    * 業務代碼禁止在全局定義CSS變量
* UI
    * 用 UI Lint 自測
    * 支持放大 / 縮小兩級
* Git
    * 分支用法是否規范
    * 提交信息是否清晰
* 素材
    * 是否使用無版權的圖片或 icon

## 參考文章

* [防禦性設計和開發](https://mp.weixin.qq.com/s/G4pME9xFHdWnFckgytnofQ)
